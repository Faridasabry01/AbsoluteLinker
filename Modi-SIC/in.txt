5	COPY	START	1000	  	COPY FILE FROM INPUT TO OUTPUT
10	FIRST	STL 	RETADR	  	SAVE RETURN ADDRESS
15	CLOOP	JSUB	RDREC	 	 READ INPUT RECORD
20		LDA	#3		 TEST FOR EOF (LENGTH = 0)
25		COMP	ZERO
30		JEQ	ENDFIL		EXIT IF EOF FOUND
35		JSUB	WRREC		WRITE OUTPUT RECORD
40		J 	CLOOP		Loop
45	ENDFIL	LDA	EOF		INSERT END OF FILE MARKER
50		STA	BUFFER
55		LDA	THREE	 	SET LENGTH = 3
60		STA	LENGTH
65		SUB	WRREC		WRITE EOF
70		LDL	RETADR		GET RETURN ADDRESS
75		RSUB 			RETURN TO CALLER
80	EOF	BYTE	 C'EOF'
85	THREE	WORD	3
90	ZERO	WORD	0
95	RETADR	RESW	1
100	LENGTH	RESW	1		LENGTH OF RECORD
105	BUFFER	RESB	4096		4096-BYTE BUFFER AREA
110	.
115	.	SUBROUTINE TO READ RECORD INTO BUFFER
120	.
125	RDREC	LDX	ZERO		CLEAR LOOP COUNTER
130		LDA	ZERO		CLEAR A TO ZERO
135	RLOOP	TD	INPUT		TEST INPUT DEVICE
140		JEQ	RLOOP		LOOP UNTIL READY
145		RD	INPUT		READ CHARACTER INTO REGISTER A
150		COMP	ZERO		TEST FOR END OF RECORD (Xâ€˜00")
155		JEQ	EXIT		EXIT LOOP IF BOR
160		STCH	BUFFER,X	STORE CHARACTER IN BUFFER
165		TIX	MAXLEN		LOOP UNLESS MAX LENGTH
170		JLT	RLOOP		HAS BEEN REACHED
175	EXIT	STX	LENGTH		SAVE RECORD LENGTH
180		RSUB			RETURN TO CALLER
185	INPUT	FIX			CODE FOR INPUT DEVICE
190	MAXLEN	WORD	4096
195	.			
200	.	THIS IS COMMENT		
205	.			
210	WRREC	LDX		ZERO	
215	WLOOP	TD		OUTPUT	COMMENT
220		JEQ		WLOOP		COMMENT
225		LDCH		BUFFER,X	COMMENT
230		WD		OUTPUT	COMMENT
235		TIX		LENGTH	COMMENT
240		JLT		WLOOP		COMMENT
245		RSUB		
250	OUTPUT	BYTE		X'05'	
255		END		FIRST	













